# Configuration for the primary nas
#  The primary nas will hold the decryption key and will not be connected to tailnet
#
sudo ./nas_sleep_setup.sh  
sudo ./nas_archive_setup.sh
sudo ./nas_reporting_setup.sh

# Configuration for the onsite backup nas
#  The onsite backup nas will not hold the encryption key and will connect to tailnet only to archive snapshots offsite
#  Other steps: add zfs_sync.pub to authorized_keys, sudo visudo and add "paul ALL=(ALL) NOPASSWD: /usr/sbin/zfs receive -F nas"
#
sudo ./nas_sleep_setup.sh
sudo ./nas_archive_setup.sh
sudo ./nas_reporting_setup.sh
sudo ./tssetup.sh

# Configuration for the offsite backup nas
#  The offsite backup will likewise not hold the encryption key. It will have tailscale installed but will always be connected to tailnet
#  so it does not need the tssetup script. Tssetup configured tailscale to come up and down on demand. By default it's always up.
#  Other steps: add zfs_sync.pub to authorized_keys, sudo visudo same as above
#
sudo ./nas_sleep_setup.sh
sudo ./nas_reporting_setup.sh

